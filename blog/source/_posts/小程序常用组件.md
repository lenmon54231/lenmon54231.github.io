---
title: 小程序常用组件
date: 2020-07-12 17:16:26
tags: [小程序]
---

<meta name="referrer" content="no-referrer"/>

## 小程序常用组件

记录组件包含：1. picker,

<!-- more -->

> 记录小程序常用的组件和调用方法

### 小程序本身封装的组件

1. picker（从底部弹起的滚动选择器）

   ```js
    <picker bindchange="bindPickerChange" value="{{selectList[index].name}}" range="{{selectList}}" range-key="{{'name'}}">
               <view class="picker">
                 {{currentType}}
               </view>
   </picker>
   ```

   外层用picker包裹，内部通过range设定滚动数据，range-key做渲染关键词，最后获得的是value的值。

   bindPickerChange方法做赋值的操作（略。。。）

2. scroll-view（可滚动视图区域)

   ```js
   <scroll-view scroll-x="true" class="nav" scroll-left="{{navScrollLeft}}" scroll-with-animation="{{true}}">
   			<block wx:for="{{classifyList}}" wx:for-index="idx" wx:for-item="item" wx:key="idx">
   				<view class="nav-item {{currentTab == idx ?'active':''}} flex_center_center" data-current="{{idx}}" data-id='{{item.classify_id}}' data-int='{{idx}}' data-name="{{item.name}}" bindtap="switchNav">
   					<text class="t_name">{{item.name}}</text>
   				</view>
   			</block>
   </scroll-view>
   ```

   scroll-left:设置横向滚动条位置

   scroll-with-animation:在设置滚动条位置时使用动画过渡

3. swiper (滑块视图容器)

   ```js
    <swiper class="swipers" autoplay="{{false}}" duration="0" current="{{currentTab}}" bindchange="swiperChange">
   		<block wx:for="{{classifyList}}" wx:for-index="idxs" data-index="{{idxs}}" wx:for-item="item" wx:key="idx">
   			<swiper-item catchtouchmove="stopTouchMove">
   			</swiper-item>
   		</block>
   	</swiper>
   ```

   autoplay:是否自动切换(轮播图的形式)

   duration:滑动动画时长

   current：当前所在滑块的 index

   catchtouchmove：禁止用户手动滑动页面

4. cover-view（覆盖在原生组件之上的文本视图）cover-image（覆盖在原生组件之上的图片视图）

   ```js
   <cover-view hidden="{{!hidePause}}" catchtap="pauseVideo" class="pause-video"></cover-view>
   <cover-image hidden="{{hidePause}}" catchtap="replayVideo" src="/assets/pause@2x.png" class="play-video"></cover-image>
   <cover-view style="padding-top:{{navTop}}px;height:{{navHeight}}px" class="nav">
   	<cover-image catchtap="gotoPrev" src="/assets/ic_cancel_white@2x.png" class="back-icon"></cover-image>
   </cover-view>
   ```

   

### 手动封装的组件

1. AlertBox(页面中间出现的弹框，中间为文字提示，拥有取消和确定按钮)

   ```js
   //父页面中使用
   <AlertBox bind:getUserConfirmResult = "getUserConfirmResult" alert_title="{{alert_title}}" is_show="{{is_show}}"></AlertBox>
   ```

   ```js
   //子页面的结构
    <!--弹框-->
     <view wx:if="{{is_show}}" class="alert_box">
       <view class="clearfloat">
         <view bindtap="closeButton" class="alert_close">
           <image src="../../assets/close@2x.png" mode="widthFix"></image>
         </view>
       </view>
       
       <view class="alert_title">{{alert_title}}</view>
       <view class="alert_button">
         <button class="confirm_button" bindtap="confirmButton">确定</button>
       </view>
     </view>
   ```

   涉及到父子组件传值的说明：

   父组件中：bind:getUserConfirmResult = "getUserConfirmResult"相当于自定义事件。可以从子组件获取到用户对于取消和确定的值，从而选择不同的显示效果。

   ```js
   //父组件调用自定义方法
   getUserConfirmResult(e) {
       //console.info("e", e)
       let that = this;
       that.setData({
         is_show: false
       });
     },
   ```

   ```js
   //子组件中调用的方法。通过this.triggerEvent()通知到父组件的自定义事件。类似于 vue 中 this.$emit。
   confirmButton:function(){
         console.info("1111111")
         let that = this;
         
         let myEventDetail = {
           is_show:false,
         };
         let myEventOption = {bubbles:false};
         that.triggerEvent('getUserConfirmResult', myEventDetail, myEventOption)
       },
   ```

   自定义组件触发事件时，需要使用 `triggerEvent` 方法，指定事件名、detail对象和事件选项：

   选项：bubbles ： 事件是否冒泡；composed：事件是否可以穿越组件边界；capturePhase： 事件是否拥有捕获阶段

2. 撒辣椒粉

3. 拉萨解放的了

4. 萨加快递费